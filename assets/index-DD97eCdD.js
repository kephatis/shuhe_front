import{b as P}from"./index-Dcav9RIf.js";import{d as y,r as v,a as h,c as V,b as e,h as t,i as c,j as i,y as k,e as x,E as a,k as C,l as B,m as E,f as M,_ as N}from"./index-BwvHQF3L.js";import{m as w}from"./md5-Bzrn7Oyt.js";import"./axiosReq-COIr0NbK.js";const U={class:"password-change-container"},R={class:"password-change-content"},T={class:"form-container"},j={class:"form-group"},D={class:"form-group"},F={class:"form-group"},I={class:"button-group"},q=["loading"],z=y({__name:"index",setup(A){const u=x(),l=v(!1),p=()=>{u.go(-1)},s=h({oldPassword:"",newPassword:"",confirmPassword:""}),m=()=>s.oldPassword?s.newPassword?s.newPassword.length<6?(a.warning("新密码长度不能少于6位"),!1):s.newPassword!==s.confirmPassword?(a.warning("两次输入的新密码不一致"),!1):s.oldPassword===s.newPassword?(a.warning("新密码不能与原密码相同"),!1):!0:(a.warning("请输入新密码"),!1):(a.warning("请输入原密码"),!1),f=async()=>{if(m())try{l.value=!0;const r=await P(w(s.oldPassword),w(s.newPassword));r.code===1?(await k.alert("密码修改成功","操作成功",{confirmButtonText:"确定",type:"success"}),u.push({name:"login"})):a.error(r.message||"密码修改失败")}catch(r){console.error("修改密码失败:",r),a.error("修改密码失败，请稍后重试")}finally{l.value=!1}},b=()=>{s.oldPassword="",s.newPassword="",s.confirmPassword="",a.info("表单已重置")};return(r,o)=>{const g=i("el-icon"),_=i("el-button"),d=i("el-input");return M(),V("div",U,[e("div",R,[t(_,{type:"text",onClick:p,class:"back-button"},{default:c(()=>[t(g,null,{default:c(()=>[t(B(E))]),_:1}),o[3]||(o[3]=C(" 返回 ",-1))]),_:1}),o[7]||(o[7]=e("h1",{class:"password-change-title"},"修改密码",-1)),o[8]||(o[8]=e("p",{class:"password-change-subtitle"},"为确保账户安全，请定期修改密码",-1)),e("div",T,[e("div",j,[o[4]||(o[4]=e("label",{class:"form-label"},"原密码",-1)),t(d,{modelValue:s.oldPassword,"onUpdate:modelValue":o[0]||(o[0]=n=>s.oldPassword=n),type:"password",placeholder:"请输入原密码","show-password":"",class:"form-input"},null,8,["modelValue"])]),e("div",D,[o[5]||(o[5]=e("label",{class:"form-label"},"新密码",-1)),t(d,{modelValue:s.newPassword,"onUpdate:modelValue":o[1]||(o[1]=n=>s.newPassword=n),type:"password",placeholder:"请输入新密码","show-password":"",class:"form-input"},null,8,["modelValue"])]),e("div",F,[o[6]||(o[6]=e("label",{class:"form-label"},"确认新密码",-1)),t(d,{modelValue:s.confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=n=>s.confirmPassword=n),type:"password",placeholder:"请再次输入新密码","show-password":"",class:"form-input"},null,8,["modelValue"])]),e("div",I,[e("button",{type:"button",onClick:f,loading:l.value,style:{background:"#4096ff"},class:"el-button--primary el-button--small submit-btn"}," 确认修改 ",8,q),e("button",{type:"button",onClick:b,style:{"background-color":"rgb(217,236,255)"},class:"el-button--small reset-btn"}," 重置 ")])])])])}}}),L=N(z,[["__scopeId","data-v-2c82a0c7"]]);export{L as default};
